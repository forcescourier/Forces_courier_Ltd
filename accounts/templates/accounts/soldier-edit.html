{%extends 'base.html'%}
{%block title%}<title>Edit {{ soldier.soldiers_name }}</title>{%endblock%}
{%block content%}
<!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body">
            <div class="container-fluid">
                <div class="row page-titles mx-0">
                    <div class="col-sm-6 p-md-0">
                        <div class="welcome-text">
                            <h4>Edit Rider Profile - {{ soldier.soldiers_name }}</h4>
                            <span>Update rider information and settings</span>
                        </div>
                    </div>
                    <div class="col-sm-6 p-md-0 justify-content-sm-end mt-2 mt-sm-0 d-flex">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
                            <li class="breadcrumb-item"><a href="{% url 'soldier' %}">Riders</a></li>
                            <li class="breadcrumb-item active"><a href="{% url 'soldier_edit' soldier.soldiers_name %}">Edit Rider</a></li>
                        </ol>
                    </div>
                </div>

                <!-- Rider Info Card -->
                <div class="row">
                    <div class="col-xl-12">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Rider:{{ soldier.soldiers_name }} {{ soldier.soldiers_id }}</h4>
                                <div class="card-action">
                                    <a href="view-rider.html?id=R001" class="btn btn-sm btn-info">
                                        <i class="flaticon-381-eye"></i> View Profile
                                    </a>
                                    <button type="button" class="btn btn-sm btn-warning" id="reset-password">
                                        <i class="flaticon-381-lock"></i> Reset Password
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Edit Form -->
                <div class="row">
                    <div class="col-xl-12">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Edit Information</h4>
                            </div>
                            <div class="card-body">
                                <form method="POST" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <!-- Personal Information -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5 class="mb-3">Personal Information</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                          <div class="form-group">
                                             <label class="text-label">Current Photo</label><br>
                                                 {% if soldier.photo %}
                                                     <img src="{{ soldier.photo.url }}" alt="photo" class="rounded" width="100">
                                                 {% else %}
                                                       <img src="/media/soldier/default.png" alt="default" class="rounded" width="100">
                                                {% endif %}
                                          </div>
                                          <div class="form-group">
                                            <label class="text-label">Upload New Photo</label>
                                                 <input type="file" class="form-control" name="photo">
                                          </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Soldier Name <span class="text-danger">*</span></label>
                                                <input type="text" class="form-control" name="soldiers_name" value="{{soldier.soldiers_name}}" required>
                                            </div>
                                        </div>
                                        
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Date of Birth <span class="text-danger">*</span></label>
                                                <input type="date" class="form-control" name="soldiers_dob" value="{{soldier.soldiers_dob}}" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Gender <span class="text-danger">*</span></label>
                                                <select class="form-control" name="soldiers_gender" required>
                                                    <option value="male" {% if soldier.soldiers_gender == "male" %} selected {% endif %}>Male</option>
                                                    <option value="female" {% if soldier.soldiers_gender == "female" %} selected {% endif %}>Female</option>
                                                    <option value="others" {% if soldier.soldiers_gender == "others" %} selected {% endif %}>Other</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">National ID / Passport <span class="text-danger">*</span></label>
                                                <input type="text" class="form-control" name="soldiers_nid" value="{{soldier.soldiers_nid}}" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Blood Group</label>
                                                 <input type="text" class="form-control" name="soldiers_Blood_group" value="{{soldier.soldiers_Blood_group}}" required>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Contact Information -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5 class="mb-3 mt-4">Contact Information</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Phone Number <span class="text-danger">*</span></label>
                                                <input type="tel" class="form-control" name="soldiers_phone" value="{{soldier.soldiers_phone}}" required>
                                            </div>
                                        </div>
                                        
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Email Address <span class="text-danger">*</span></label>
                                                <input type="email" class="form-control" name="soldiers_email" value="{{soldier.soldiers_email}}" required>
                                            </div>
                                        </div>
                                        
                                    </div>

                                    <!-- Address Information -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5 class="mb-3 mt-4">Address Information</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label class="text-label">Current Address <span class="text-danger">*</span></label>
                                                <textarea class="form-control" rows="2" name="soldiers_address" required>{{soldier.soldiers_address}}</textarea>
                                            </div>
                                        </div>
                                    

                                    

                                    
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Service Areas</label>
                                                      {{ form.soldiers_area_id }}
                                                <small class="text-muted">Areas where rider provides services</small>
                                            </div>
                                        </div>

                                    </div>
                                    

                                    <!-- Vehicle Information -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5 class="mb-3 mt-4">Vehicle Information</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Vehicle Type <span class="text-danger">*</span></label>
                                                <select class="form-control" name="soldiers_vehicle_type" required>
  <option value="motorcycle" {% if soldier.soldiers_vehicle_type == "motorcycle" %}selected{% endif %}>
    Motorcycle
  </option>
  <option value="scooter"   {% if soldier.soldiers_vehicle_type == "scooter" %}selected{% endif %}>
    Scooter
  </option>
  <option value="bicycle"   {% if soldier.soldiers_vehicle_type == "bicycle" %}selected{% endif %}>
    Bicycle
  </option>
  <option value="car"       {% if soldier.soldiers_vehicle_type == "car" %}selected{% endif %}>
    Car
  </option>
</select>

                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Vehicle Brand</label>
                                                <input type="text" class="form-control" name="soldiers_vehicle_brand" value="{{soldier.soldiers_vehicle_brand}}">
                                            </div>
                                        </div>
                                    </div>

                                    
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">License Number <span class="text-danger">*</span></label>
                                                <input type="text" class="form-control" name="soldiers_vehicle_number" value="{{soldier.soldiers_vehicle_number}}" required>
                                            </div>
                                        </div>
                                    </div>

                                     <div class="row">
                                        <div class="col-md-6">
                                               <div class="form-group">
                                                   <label class="text-label">License Expiry</label>
                                                   <input type="date" class="form-control" name="license_expiry" value="{{soldier.license_expiry}}" >
                                               </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-md-6">
                                                  <label class="text-label">Insurance Status <span class="text-danger">*</span></label>
                                                   <select class="form-control" name="insurance_status" required>
                                                     <option value="yes" {% if soldier.soldiers_insurance_status == "yes" %} selected {% endif %}>Yes</option>
                                                     <option value="no" {% if soldier.soldiers_insurance_status == "no" %} selected {% endif %}>No</option>
                                                     
                                                 </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-md-6">
                                                  <label class="text-label">Insurance Expiry </label>
                                                  <input type="date" class="form-control" name="insurance_expiry" value="{{soldier.insurance_expiry}}">
                                                </div>
                                            </div>
                                     </div>
                                    
                        

                                    <!-- Employment Information -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5 class="mb-3 mt-4">Employment Information</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Employment Type <span class="text-danger">*</span></label>
                                                <select class="form-control" required>
                                                    <option value="full_time" selected>Full Time</option>
                                                    <option value="part_time">Part Time</option>
                                                    <option value="contract">Contract</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Join Date <span class="text-danger">*</span></label>
                                                <input type="date" class="form-control" value="2023-01-15" required>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Base Salary</label>
                                                <input type="number" class="form-control" step="0.01" value="25000">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Commission Rate (%)</label>
                                                <input type="number" class="form-control" step="0.1" value="5.5">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Account Settings -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5 class="mb-3 mt-4">Account Settings</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Username <span class="text-danger">*</span></label>
                                                <input type="text" class="form-control" name="soldiers_username" value="{{soldier.soldiers_username}}" required readonly>
                                                <small class="text-muted">Username cannot be changed</small>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="text-label">Status</label>
                                                <select class="form-control" name="status">
                                                    <option value="active" {%if soldier.status == "active" %} selected {% endif %}>Active</option>
                                                    <option value="pending" {%if soldier.status == "pending" %} selected {% endif %}>Pending Approval</option>
                                                    <option value="suspended" {%if soldier.status == "suspended" %} selected {% endif %}>Suspended</option>
                                                    <option value="inactive" {%if soldier.status == "inactive" %} selected {% endif %}>Inactive</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Notifications -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5 class="mb-3 mt-4">Notification Preferences</h5>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" id="emailNotif" checked>
                                                <label class="custom-control-label" for="emailNotif">Email Notifications</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" id="smsNotif" checked>
                                                <label class="custom-control-label" for="smsNotif">SMS Notifications</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" id="autoAssign">
                                                <label class="custom-control-label" for="autoAssign">Auto-assign Parcels</label>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Action Buttons -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="text-right mt-4">
                                                <a href="../riders/riders.html" class="btn btn-light mr-2">Cancel</a>
                                                <button type="button" class="btn btn-info mr-2" id="save-draft">Save Changes</button>
                                                <button type="submit" class="btn btn-primary">Update Rider</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activity Log -->
                <div class="row">
                    <div class="col-xl-12">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Recent Activity</h4>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Action</th>
                                                <th>Details</th>
                                                <th>By</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>2024-01-15 10:30</td>
                                                <td><span class="badge badge-success">Profile Updated</span></td>
                                                <td>Phone number changed</td>
                                                <td>Admin User</td>
                                            </tr>
                                            <tr>
                                                <td>2024-01-10 14:20</td>
                                                <td><span class="badge badge-info">Status Changed</span></td>
                                                <td>Account activated</td>
                                                <td>System</td>
                                            </tr>
                                            <tr>
                                                <td>2024-01-01 09:00</td>
                                                <td><span class="badge badge-primary">Account Created</span></td>
                                                <td>Rider profile created</td>
                                                <td>Admin User</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{ form.errors }}
                </div>
            </div>
        </div>
        <!--**********************************
            Content body end
        ***********************************-->
{%endblock%}